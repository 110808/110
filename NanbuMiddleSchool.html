<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>南部中学表白墙</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Microsoft YaHei", Arial, sans-serif; }
        body { background-color: #f9f5f6; color: #333; line-height: 1.6; padding-bottom: 70px; }

        /* 图片滚动区 */
        .img-scroll { margin: 20px auto; width: 90%; height: 220px; overflow: hidden; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .img-scroll marquee { height: 100%; }
        .img-scroll img { height: 100%; margin: 0 10px; border-radius: 4px; object-fit: cover; }

        /* 主体内容 */
        .main { width: 90%; max-width: 1200px; margin: 30px auto; display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px; }
        @media (max-width: 768px) { .main { grid-template-columns: 1fr; } }

        /* 发送表单 */
        .send-form { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .send-form h2 { color: #4a90e2; margin-bottom: 20px; font-size: 18px; border-left: 4px solid #4a90e2; padding-left: 10px; }
        .form-tip { color: #e25c4a; font-size: 14px; margin-bottom: 15px; display: none; }
        .form-group { margin-bottom: 18px; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 14px; color: #666; }
        .form-group input, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; outline: none; }
        .form-group input:focus, .form-group textarea:focus { border-color: #4a90e2; }
        .form-group textarea { height: 120px; resize: none; }
        .submit-btn { width: 100%; background: #4a90e2; color: white; border: none; padding: 12px; border-radius: 4px; font-size: 15px; cursor: pointer; opacity: 0.7; pointer-events: none; }
        .submit-btn.active { opacity: 1; pointer-events: auto; }
        .submit-btn.active:hover { background: #3a80d2; }

        /* 表白展示区 */
        .message-list { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .message-list h2 { color: #e25c4a; margin-bottom: 20px; font-size: 18px; border-left: 4px solid #e25c4a; padding-left: 10px; }
        .message-card { border: 1px solid #f0f0f0; border-radius: 6px; padding: 18px; margin-bottom: 15px; position: relative; }
        .delete-btn { position: absolute; top: 15px; right: 15px; background: #e25c4a; color: white; border: none; padding: 3px 8px; border-radius: 3px; font-size: 12px; cursor: pointer; display: none; }
        .delete-btn:hover { background: #d24c3a; }
        .message-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
        .sender { color: #e25c4a; font-weight: bold; }
        .receiver { color: #666; }
        .message-time { color: #999; font-size: 12px; margin-bottom: 12px; }
        .message-content { font-size: 14px; line-height: 1.8; margin-bottom: 12px; }

        /* 点赞/回复样式 */
        .like-area { display: flex; align-items: center; margin-bottom: 12px; cursor: pointer; color: #999; font-size: 13px; }
        .like-area i { margin-right: 5px; font-style: normal; }
        .like-area.active { color: #e25c4a; }
        .reply-area { margin-top: 15px; }
        .reply-input { display: flex; gap: 8px; margin-bottom: 10px; }
        .reply-input input { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 13px; outline: none; }
        .reply-input button { padding: 8px 12px; background: #4a90e2; color: white; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; }
        .reply-input button:hover { background: #3a80d2; }
        .reply-list { padding-left: 15px; border-left: 2px solid #eee; }
        .reply-item { font-size: 13px; margin-bottom: 8px; color: #666; }
        .reply-sender { color: #4a90e2; font-weight: 500; }

        /* 登录/注册弹窗（重点优化：增加实时提示） */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; width: 90%; max-width: 350px; padding: 25px; border-radius: 8px; box-shadow: 0 3px 15px rgba(0,0,0,0.2); position: relative; }
        .close-modal { position: absolute; top: 15px; right: 15px; font-size: 20px; color: #999; cursor: pointer; }
        .modal-title { text-align: center; color: #4a90e2; margin-bottom: 20px; font-size: 18px; }
        .auth-form-group { margin-bottom: 15px; }
        .auth-form-group label { display: block; margin-bottom: 5px; font-size: 14px; color: #666; }
        .auth-form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; outline: none; }
        .auth-form-group input:focus { border-color: #4a90e2; }
        .auth-submit { width: 100%; background: #4a90e2; color: white; border: none; padding: 10px; border-radius: 4px; font-size: 15px; cursor: pointer; margin-top: 10px; }
        .auth-submit:hover { background: #3a80d2; }
        .auth-switch { text-align: center; margin-top: 15px; font-size: 14px; color: #666; }
        .auth-switch span { color: #4a90e2; cursor: pointer; }
        .auth-tip { color: #e25c4a; font-size: 13px; text-align: center; margin-top: 10px; display: block; } /* 改为默认显示，避免隐藏导致用户看不到提示 */

        /* 底部导航 */
        .nav { background: #4a90e2; position: fixed; bottom: 0; left: 0; width: 100%; z-index: 100; box-shadow: 0 -2px 8px rgba(0,0,0,0.1); }
        .nav-container { width: 90%; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 12px 0; }
        .nav-logo { color: white; font-size: 22px; font-weight: bold; }
        .nav-menu { display: flex; list-style: none; align-items: center; }
        .nav-menu li { margin-left: 25px; }
        @media (max-width: 768px) { .nav-menu li { margin-left: 12px; } .nav-logo { font-size: 18px; } .nav-menu a, .auth-btn, .user-info { font-size: 13px; } }
        .nav-menu a, .auth-btn { color: white; text-decoration: none; font-size: 15px; padding: 5px 8px; border-radius: 4px; border: none; background: transparent; cursor: pointer; }
        .nav-menu a:hover, .auth-btn:hover { background: rgba(255,255,255,0.2); }
        .user-info { color: white; font-size: 15px; }

        /* 底部版权 */
        #about { text-align: center; padding: 20px 0; font-size: 12px; color: #999; border-top: 1px solid #eee; }
    </style>
</head>
<body>
    <!-- 图片滚动 -->
    <section id="home" class="img-scroll">
        <marquee direction="left" scrollamount="5" onmouseover="this.stop()" onmouseout="this.start()">
            <img src="https://picsum.photos/id/1018/400/220" alt="南部中学校园1">
            <img src="https://picsum.photos/id/1015/400/220" alt="南部中学校园2">
            <img src="https://picsum.photos/id/1019/400/220" alt="南部中学校园3">
            <img src="https://picsum.photos/id/1039/400/220" alt="南部中学校园4">
        </marquee>
    </section>

    <!-- 主体内容 -->
    <div class="main">
        <!-- 发送表单 -->
        <section id="send" class="send-form">
            <h2>写下你的心意</h2>
            <div class="form-tip" id="loginTip">请先登录后再发送表白～</div>
            <form id="confessionForm">
                <div class="form-group">
                    <label for="senderName">你的昵称</label>
                    <input type="text" id="senderName" placeholder="匿名可填'匿名同学'" required>
                </div>
                <div class="form-group">
                    <label for="receiverName">表白对象</label>
                    <input type="text" id="receiverName" placeholder="例如'高一2班小明'" required>
                </div>
                <div class="form-group">
                    <label for="confessionContent">表白内容</label>
                    <textarea id="confessionContent" placeholder="说说你想对TA说的话..." required></textarea>
                </div>
                <button type="submit" class="submit-btn">发送表白</button>
            </form>
        </section>

        <!-- 表白广场 -->
        <section id="message" class="message-list">
            <h2>表白广场</h2>
            <div id="messageContainer"></div>
        </section>
    </div>

    <!-- 底部版权 -->
    <footer id="about">
        <p>南部中学表白墙 | 温馨提示：文明表白，理性互动</p>
        <p>© 2025 南部中学技术部 制作</p>
    </footer>

    <!-- 底部导航 -->
    <nav class="nav">
        <div class="nav-container">
            <div class="nav-logo">南部中学表白墙</div>
            <ul class="nav-menu">
                <li><a href="#home">首页</a></li>
                <li><a href="#send">发送表白</a></li>
                <li><a href="#message">表白广场</a></li>
                <li><a href="#about">关于我们</a></li>
                <li id="loginBtn" class="auth-btn">登录</li>
                <li id="registerBtn" class="auth-btn">注册</li>
                <li id="userInfo" class="user-info" style="display: none;"></li>
                <li id="logoutBtn" class="auth-btn" style="display: none;">退出</li>
            </ul>
        </div>
    </nav>

    <!-- 注册弹窗 -->
    <div class="modal" id="registerModal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" id="closeRegister">&times;</span>
            <h3 class="modal-title">南部中学账号注册</h3>
            <form id="registerForm">
                <div class="auth-form-group">
                    <label for="regAccount">账号（4-12位字母/数字）</label>
                    <input type="text" id="regAccount" required>
                </div>
                <div class="auth-tip" id="regAccountTip">请输入4-12位字母或数字</div>
                
                <div class="auth-form-group">
                    <label for="regPwd">密码（6-12位）</label>
                    <input type="password" id="regPwd" required>
                </div>
                <div class="auth-tip" id="regPwdTip">请输入6-12位密码</div>
                
                <div c
